const yr=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};yr();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ge=window,Lt=Ge.ShadowRoot&&(Ge.ShadyCSS===void 0||Ge.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Un=Symbol(),qt=new WeakMap;class br{constructor(e,n,r){if(this._$cssResult$=!0,r!==Un)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Lt&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=qt.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&qt.set(n,e))}return e}toString(){return this.cssText}}const Ar=t=>new br(typeof t=="string"?t:t+"",void 0,Un),wr=(t,e)=>{Lt?t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{const r=document.createElement("style"),i=Ge.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)})},Xt=Lt?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Ar(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var dt;const Ye=window,Yt=Ye.trustedTypes,Sr=Yt?Yt.emptyScript:"",Zt=Ye.reactiveElementPolyfillSupport,At={toAttribute(t,e){switch(e){case Boolean:t=t?Sr:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Mn=(t,e)=>e!==t&&(e==e||t==t),ft={attribute:!0,type:String,converter:At,reflect:!1,hasChanged:Mn};class _e extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var n;(n=this.h)!==null&&n!==void 0||(this.h=[]),this.h.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((n,r)=>{const i=this._$Ep(r,n);i!==void 0&&(this._$Ev.set(i,r),e.push(i))}),e}static createProperty(e,n=ft){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){const r=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,r,n);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){return{get(){return this[n]},set(i){const s=this[e];this[n]=i,this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||ft}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,r=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const i of r)this.createProperty(i,n[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(Xt(i))}else e!==void 0&&n.push(Xt(e));return n}static _$Ep(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,r;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)===null||r===void 0||r.call(e))}removeController(e){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;const n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return wr(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostConnected)===null||r===void 0?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostDisconnected)===null||r===void 0?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$EO(e,n,r=ft){var i;const s=this.constructor._$Ep(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?r.converter:At).toAttribute(n,r.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,n){var r;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),c=typeof o.converter=="function"?{fromAttribute:o.converter}:((r=o.converter)===null||r===void 0?void 0:r.fromAttribute)!==void 0?o.converter:At;this._$El=s,this[s]=c.fromAttribute(n,o.type),this._$El=null}}requestUpdate(e,n,r){let i=!0;e!==void 0&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||Mn)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),r.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,r))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let n=!1;const r=this._$AL;try{n=this.shouldUpdate(r),n?(this.willUpdate(r),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(r)):this._$Ek()}catch(i){throw n=!1,this._$Ek(),i}n&&this._$AE(r)}willUpdate(e){}_$AE(e){var n;(n=this._$ES)===null||n===void 0||n.forEach(r=>{var i;return(i=r.hostUpdated)===null||i===void 0?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((n,r)=>this._$EO(r,this[r],n)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}_e.finalized=!0,_e.elementProperties=new Map,_e.elementStyles=[],_e.shadowRootOptions={mode:"open"},Zt==null||Zt({ReactiveElement:_e}),((dt=Ye.reactiveElementVersions)!==null&&dt!==void 0?dt:Ye.reactiveElementVersions=[]).push("1.4.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var pt;const Ze=window,ye=Ze.trustedTypes,Qt=ye?ye.createPolicy("lit-html",{createHTML:t=>t}):void 0,Y=`lit$${(Math.random()+"").slice(9)}$`,Hn="?"+Y,$r=`<${Hn}>`,be=document,Le=(t="")=>be.createComment(t),Ue=t=>t===null||typeof t!="object"&&typeof t!="function",kn=Array.isArray,Rr=t=>kn(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Te=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,en=/-->/g,tn=/>/g,te=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),nn=/'/g,rn=/"/g,Fn=/^(?:script|style|textarea|title)$/i,Tr=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),se=Tr(1),Ae=Symbol.for("lit-noChange"),I=Symbol.for("lit-nothing"),sn=new WeakMap,Cr=(t,e,n)=>{var r,i;const s=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:e;let o=s._$litPart$;if(o===void 0){const c=(i=n==null?void 0:n.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new Be(e.insertBefore(Le(),c),c,void 0,n!=null?n:{})}return o._$AI(t),o},ge=be.createTreeWalker(be,129,null,!1),Nr=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":"",o=Te;for(let a=0;a<n;a++){const l=t[a];let h,d,u=-1,f=0;for(;f<l.length&&(o.lastIndex=f,d=o.exec(l),d!==null);)f=o.lastIndex,o===Te?d[1]==="!--"?o=en:d[1]!==void 0?o=tn:d[2]!==void 0?(Fn.test(d[2])&&(i=RegExp("</"+d[2],"g")),o=te):d[3]!==void 0&&(o=te):o===te?d[0]===">"?(o=i!=null?i:Te,u=-1):d[1]===void 0?u=-2:(u=o.lastIndex-d[2].length,h=d[1],o=d[3]===void 0?te:d[3]==='"'?rn:nn):o===rn||o===nn?o=te:o===en||o===tn?o=Te:(o=te,i=void 0);const m=o===te&&t[a+1].startsWith("/>")?" ":"";s+=o===Te?l+$r:u>=0?(r.push(h),l.slice(0,u)+"$lit$"+l.slice(u)+Y+m):l+Y+(u===-2?(r.push(void 0),a):m)}const c=s+(t[n]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Qt!==void 0?Qt.createHTML(c):c,r]};class Me{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const c=e.length-1,a=this.parts,[l,h]=Nr(e,n);if(this.el=Me.createElement(l,r),ge.currentNode=this.el.content,n===2){const d=this.el.content,u=d.firstChild;u.remove(),d.append(...u.childNodes)}for(;(i=ge.nextNode())!==null&&a.length<c;){if(i.nodeType===1){if(i.hasAttributes()){const d=[];for(const u of i.getAttributeNames())if(u.endsWith("$lit$")||u.startsWith(Y)){const f=h[o++];if(d.push(u),f!==void 0){const m=i.getAttribute(f.toLowerCase()+"$lit$").split(Y),A=/([.?@])?(.*)/.exec(f);a.push({type:1,index:s,name:A[2],strings:m,ctor:A[1]==="."?Pr:A[1]==="?"?xr:A[1]==="@"?Lr:ot})}else a.push({type:6,index:s})}for(const u of d)i.removeAttribute(u)}if(Fn.test(i.tagName)){const d=i.textContent.split(Y),u=d.length-1;if(u>0){i.textContent=ye?ye.emptyScript:"";for(let f=0;f<u;f++)i.append(d[f],Le()),ge.nextNode(),a.push({type:2,index:++s});i.append(d[u],Le())}}}else if(i.nodeType===8)if(i.data===Hn)a.push({type:2,index:s});else{let d=-1;for(;(d=i.data.indexOf(Y,d+1))!==-1;)a.push({type:7,index:s}),d+=Y.length-1}s++}}static createElement(e,n){const r=be.createElement("template");return r.innerHTML=e,r}}function we(t,e,n=t,r){var i,s,o,c;if(e===Ae)return e;let a=r!==void 0?(i=n._$Cl)===null||i===void 0?void 0:i[r]:n._$Cu;const l=Ue(e)?void 0:e._$litDirective$;return(a==null?void 0:a.constructor)!==l&&((s=a==null?void 0:a._$AO)===null||s===void 0||s.call(a,!1),l===void 0?a=void 0:(a=new l(t),a._$AT(t,n,r)),r!==void 0?((o=(c=n)._$Cl)!==null&&o!==void 0?o:c._$Cl=[])[r]=a:n._$Cu=a),a!==void 0&&(e=we(t,a._$AS(t,e.values),a,r)),e}class Ir{constructor(e,n){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var n;const{el:{content:r},parts:i}=this._$AD,s=((n=e==null?void 0:e.creationScope)!==null&&n!==void 0?n:be).importNode(r,!0);ge.currentNode=s;let o=ge.nextNode(),c=0,a=0,l=i[0];for(;l!==void 0;){if(c===l.index){let h;l.type===2?h=new Be(o,o.nextSibling,this,e):l.type===1?h=new l.ctor(o,l.name,l.strings,this,e):l.type===6&&(h=new Ur(o,this,e)),this.v.push(h),l=i[++a]}c!==(l==null?void 0:l.index)&&(o=ge.nextNode(),c++)}return s}m(e){let n=0;for(const r of this.v)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Be{constructor(e,n,r,i){var s;this.type=2,this._$AH=I,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$C_=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$C_}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=we(this,e,n),Ue(e)?e===I||e==null||e===""?(this._$AH!==I&&this._$AR(),this._$AH=I):e!==this._$AH&&e!==Ae&&this.$(e):e._$litType$!==void 0?this.T(e):e.nodeType!==void 0?this.k(e):Rr(e)?this.O(e):this.$(e)}S(e,n=this._$AB){return this._$AA.parentNode.insertBefore(e,n)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}$(e){this._$AH!==I&&Ue(this._$AH)?this._$AA.nextSibling.data=e:this.k(be.createTextNode(e)),this._$AH=e}T(e){var n;const{values:r,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Me.createElement(i.h,this.options)),i);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===s)this._$AH.m(r);else{const o=new Ir(s,this),c=o.p(this.options);o.m(r),this.k(c),this._$AH=o}}_$AC(e){let n=sn.get(e.strings);return n===void 0&&sn.set(e.strings,n=new Me(e)),n}O(e){kn(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new Be(this.S(Le()),this.S(Le()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$C_=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}}class ot{constructor(e,n,r,i,s){this.type=1,this._$AH=I,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=I}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=we(this,e,n,0),o=!Ue(e)||e!==this._$AH&&e!==Ae,o&&(this._$AH=e);else{const c=e;let a,l;for(e=s[0],a=0;a<s.length-1;a++)l=we(this,c[r+a],n,a),l===Ae&&(l=this._$AH[a]),o||(o=!Ue(l)||l!==this._$AH[a]),l===I?e=I:e!==I&&(e+=(l!=null?l:"")+s[a+1]),this._$AH[a]=l}o&&!i&&this.P(e)}P(e){e===I?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class Pr extends ot{constructor(){super(...arguments),this.type=3}P(e){this.element[this.name]=e===I?void 0:e}}const Or=ye?ye.emptyScript:"";class xr extends ot{constructor(){super(...arguments),this.type=4}P(e){e&&e!==I?this.element.setAttribute(this.name,Or):this.element.removeAttribute(this.name)}}class Lr extends ot{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){var r;if((e=(r=we(this,e,n,0))!==null&&r!==void 0?r:I)===Ae)return;const i=this._$AH,s=e===I&&i!==I||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==I&&(i===I||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,e):this._$AH.handleEvent(e)}}class Ur{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){we(this,e)}}const on=Ze.litHtmlPolyfillSupport;on==null||on(Me,Be),((pt=Ze.litHtmlVersions)!==null&&pt!==void 0?pt:Ze.litHtmlVersions=[]).push("2.3.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var _t,mt;class Q extends _e{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,n;const r=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=r.firstChild),r}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=Cr(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return Ae}}Q.finalized=!0,Q._$litElement$=!0,(_t=globalThis.litElementHydrateSupport)===null||_t===void 0||_t.call(globalThis,{LitElement:Q});const an=globalThis.litElementPolyfillSupport;an==null||an({LitElement:Q});((mt=globalThis.litElementVersions)!==null&&mt!==void 0?mt:globalThis.litElementVersions=[]).push("3.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const at=t=>e=>typeof e=="function"?((n,r)=>(customElements.define(n,r),r))(t,e):((n,r)=>{const{kind:i,elements:s}=r;return{kind:i,elements:s,finisher(o){customElements.define(n,o)}}})(t,e);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var vt;((vt=window.HTMLSlotElement)===null||vt===void 0?void 0:vt.prototype.assignedElements)!=null;const wt=(t,e="log")=>{e==="error"?console&&typeof console.error=="function"&&console.error(t):console&&typeof console.info=="function"&&console.info(t)},V=t=>wt(t,"error"),Mr=()=>navigator.getGamepads&&typeof navigator.getGamepads=="function"||navigator.getGamepads&&typeof navigator.webkitGetGamepads=="function"||!1,Ce=()=>({action:()=>{},after:()=>{},before:()=>{}}),B={ON:"Gamepad detected.",OFF:"Gamepad disconnected.",INVALID_PROPERTY:"Invalid property.",INVALID_VALUE_NUMBER:"Invalid value. It must be a number between 0.00 and 1.00.",INVALID_BUTTON:"Button does not exist.",UNKNOWN_EVENT:"Unknown event name.",NO_SUPPORT:"Your web browser does not support the Gamepad API."},Hr={init:function(t){let e={id:t.index,buttons:t.buttons.length,axes:Math.floor(t.axes.length/2),axeValues:[],axeThreshold:[1],hapticActuator:null,vibrationMode:-1,vibration:!1,mapping:t.mapping,buttonActions:{},axesActions:{},pressed:{},set:function(n,r){if(["axeThreshold"].indexOf(n)>=0){if(n==="axeThreshold"&&(!parseFloat(r)||r<0||r>1)){V(B.INVALID_VALUE_NUMBER);return}this[n]=r}else V(B.INVALID_PROPERTY)},vibrate:function(n=.75,r=500){if(this.hapticActuator)switch(this.vibrationMode){case 0:return this.hapticActuator.pulse(n,r);case 1:return this.hapticActuator.playEffect("dual-rumble",{duration:r,strongMagnitude:n,weakMagnitude:n})}},triggerDirectionalAction:function(n,r,i,s,o){i&&s%2===o?(this.pressed[`${n}${r}`]||(this.pressed[`${n}${r}`]=!0,this.axesActions[r][n].before()),this.axesActions[r][n].action()):this.pressed[`${n}${r}`]&&s%2===o&&(delete this.pressed[`${n}${r}`],this.axesActions[r][n].after())},checkStatus:function(){let n={};const r=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[];if(r.length){if(n=r[this.id],n.buttons)for(let i=0;i<this.buttons;i++)n.buttons[i].pressed===!0?(this.pressed[`button${i}`]||(this.pressed[`button${i}`]=!0,this.buttonActions[i].before()),this.buttonActions[i].action()):this.pressed[`button${i}`]&&(delete this.pressed[`button${i}`],this.buttonActions[i].after());if(n.axes){const i=n.axes.length%2;for(let s=0;s<this.axes*2;s++){const o=n.axes[s+i].toFixed(4),c=Math.floor(s/2);this.axeValues[c][s%2]=o,this.triggerDirectionalAction("right",c,o>=this.axeThreshold[0],s,0),this.triggerDirectionalAction("left",c,o<=-this.axeThreshold[0],s,0),this.triggerDirectionalAction("down",c,o>=this.axeThreshold[0],s,1),this.triggerDirectionalAction("up",c,o<=-this.axeThreshold[0],s,1)}}}},associateEvent:function(n,r,i){if(n.match(/^button\d+$/)){const s=parseInt(n.match(/^button(\d+)$/)[1]);s>=0&&s<this.buttons?this.buttonActions[s][i]=r:V(B.INVALID_BUTTON)}else if(n==="start")this.buttonActions[9][i]=r;else if(n==="select")this.buttonActions[8][i]=r;else if(n==="r1")this.buttonActions[5][i]=r;else if(n==="r2")this.buttonActions[7][i]=r;else if(n==="l1")this.buttonActions[4][i]=r;else if(n==="l2")this.buttonActions[6][i]=r;else if(n==="power")this.buttons>=17?this.buttonActions[16][i]=r:V(B.INVALID_BUTTON);else if(n.match(/^(up|down|left|right)(\d+)$/)){const s=n.match(/^(up|down|left|right)(\d+)$/),o=s[1],c=parseInt(s[2]);c>=0&&c<this.axes?this.axesActions[c][o][i]=r:V(B.INVALID_BUTTON)}else if(n.match(/^(up|down|left|right)$/)){const s=n.match(/^(up|down|left|right)$/)[1];this.axesActions[0][s][i]=r}return this},on:function(n,r){return this.associateEvent(n,r,"action")},off:function(n){return this.associateEvent(n,function(){},"action")},after:function(n,r){return this.associateEvent(n,r,"after")},before:function(n,r){return this.associateEvent(n,r,"before")}};for(let n=0;n<e.buttons;n++)e.buttonActions[n]=Ce();for(let n=0;n<e.axes;n++)e.axesActions[n]={down:Ce(),left:Ce(),right:Ce(),up:Ce()},e.axeValues[n]=[0,0];return t.hapticActuators?typeof t.hapticActuators.pulse=="function"?(e.hapticActuator=t.hapticActuators,e.vibrationMode=0,e.vibration=!0):t.hapticActuators[0]&&typeof t.hapticActuators[0].pulse=="function"&&(e.hapticActuator=t.hapticActuators[0],e.vibrationMode=0,e.vibration=!0):t.vibrationActuator&&typeof t.vibrationActuator.playEffect=="function"&&(e.hapticActuator=t.vibrationActuator,e.vibrationMode=1,e.vibration=!0),e}},ie={gamepads:{},axeThreshold:[1],isReady:Mr(),onConnect:function(){},onDisconnect:function(){},onBeforeCycle:function(){},onAfterCycle:function(){},getGamepads:function(){return this.gamepads},getGamepad:function(t){return this.gamepads[t]?this.gamepads[t]:null},set:function(t,e){if(["axeThreshold"].indexOf(t)>=0){if(t==="axeThreshold"&&(!parseFloat(e)||e<0||e>1)){V(B.INVALID_VALUE_NUMBER);return}if(this[t]=e,t==="axeThreshold"){const r=this.getGamepads(),i=Object.keys(r);for(let s=0;s<i.length;s++)r[i[s]].set("axeThreshold",this.axeThreshold)}}else V(B.INVALID_PROPERTY)},checkStatus:function(){const t=window.requestAnimationFrame||window.webkitRequestAnimationFrame,e=Object.keys(ie.gamepads);ie.onBeforeCycle();for(let n=0;n<e.length;n++)ie.gamepads[e[n]].checkStatus();ie.onAfterCycle(),e.length>0&&t(ie.checkStatus)},init:function(){window.addEventListener("gamepadconnected",t=>{const e=t.gamepad||t.detail.gamepad;if(wt(B.ON),window.gamepads||(window.gamepads={}),e){if(!window.gamepads[e.index]){window.gamepads[e.index]=e;const n=Hr.init(e);n.set("axeThreshold",this.axeThreshold),this.gamepads[n.id]=n,this.onConnect(this.gamepads[n.id])}Object.keys(this.gamepads).length===1&&this.checkStatus()}}),window.addEventListener("gamepaddisconnected",t=>{const e=t.gamepad||t.detail.gamepad;wt(B.OFF),e&&(delete window.gamepads[e.index],delete this.gamepads[e.index],this.onDisconnect(e.index))})},on:function(t,e){switch(t){case"connect":this.onConnect=e;break;case"disconnect":this.onDisconnect=e;break;case"beforeCycle":case"beforecycle":this.onBeforeCycle=e;break;case"afterCycle":case"aftercycle":this.onAfterCycle=e;break;default:V(B.UNKNOWN_EVENT);break}return this},off:function(t){switch(t){case"connect":this.onConnect=function(){};break;case"disconnect":this.onDisconnect=function(){};break;case"beforeCycle":case"beforecycle":this.onBeforeCycle=function(){};break;case"afterCycle":case"aftercycle":this.onAfterCycle=function(){};break;default:V(B.UNKNOWN_EVENT);break}return this}};ie.init();var kr=Object.defineProperty,Fr=Object.getOwnPropertyDescriptor,Dr=(t,e,n,r)=>{for(var i=r>1?void 0:r?Fr(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&kr(e,n,i),i};let ln=class extends Q{createRenderRoot(){return this}render(){return se`
    <div id="app-index__menu-container">
      <ul class="app-index__menu">
        <li><a data-route="game" tabindex="0" role="button">START</a></li>
        <li><a data-route="help" tabindex="0" role="button">HELP</a></li>
      </ul>
    </div>
    `}};ln=Dr([at("app-menu")],ln);function Qe(t){return t=t||[],Array.isArray(t)?t:[t]}function W(t){return`[Vaadin.Router] ${t}`}function Br(t){if(typeof t!="object")return String(t);const e=Object.prototype.toString.call(t).match(/ (.*)\]$/)[1];return e==="Object"||e==="Array"?`${e} ${JSON.stringify(t)}`:e}const et="module",tt="nomodule",St=[et,tt];function cn(t){if(!t.match(/.+\.[m]?js$/))throw new Error(W(`Unsupported type for bundle "${t}": .js or .mjs expected.`))}function Dn(t){if(!t||!z(t.path))throw new Error(W('Expected route config to be an object with a "path" string property, or an array of such objects'));const e=t.bundle,n=["component","redirect","bundle"];if(!ce(t.action)&&!Array.isArray(t.children)&&!ce(t.children)&&!nt(e)&&!n.some(r=>z(t[r])))throw new Error(W(`Expected route config "${t.path}" to include either "${n.join('", "')}" or "action" function but none found.`));if(e)if(z(e))cn(e);else if(St.some(r=>r in e))St.forEach(r=>r in e&&cn(e[r]));else throw new Error(W('Expected route bundle to include either "'+tt+'" or "'+et+'" keys, or both'));t.redirect&&["bundle","component"].forEach(r=>{r in t&&console.warn(W(`Route config "${t.path}" has both "redirect" and "${r}" properties, and "redirect" will always override the latter. Did you mean to only use "${r}"?`))})}function un(t){Qe(t).forEach(e=>Dn(e))}function hn(t,e){let n=document.head.querySelector('script[src="'+t+'"][async]');return n||(n=document.createElement("script"),n.setAttribute("src",t),e===et?n.setAttribute("type",et):e===tt&&n.setAttribute(tt,""),n.async=!0),new Promise((r,i)=>{n.onreadystatechange=n.onload=s=>{n.__dynamicImportLoaded=!0,r(s)},n.onerror=s=>{n.parentNode&&n.parentNode.removeChild(n),i(s)},n.parentNode===null?document.head.appendChild(n):n.__dynamicImportLoaded&&r()})}function zr(t){return z(t)?hn(t):Promise.race(St.filter(e=>e in t).map(e=>hn(t[e],e)))}function Ie(t,e){return!window.dispatchEvent(new CustomEvent(`vaadin-router-${t}`,{cancelable:t==="go",detail:e}))}function nt(t){return typeof t=="object"&&!!t}function ce(t){return typeof t=="function"}function z(t){return typeof t=="string"}function Bn(t){const e=new Error(W(`Page not found (${t.pathname})`));return e.context=t,e.code=404,e}const me=new class{};function Wr(t){const e=t.port,n=t.protocol,s=n==="http:"&&e==="80"||n==="https:"&&e==="443"?t.hostname:t.host;return`${n}//${s}`}function dn(t){if(t.defaultPrevented||t.button!==0||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)return;let e=t.target;const n=t.composedPath?t.composedPath():t.path||[];for(let c=0;c<n.length;c++){const a=n[c];if(a.nodeName&&a.nodeName.toLowerCase()==="a"){e=a;break}}for(;e&&e.nodeName.toLowerCase()!=="a";)e=e.parentNode;if(!e||e.nodeName.toLowerCase()!=="a"||e.target&&e.target.toLowerCase()!=="_self"||e.hasAttribute("download")||e.hasAttribute("router-ignore")||e.pathname===window.location.pathname&&e.hash!==""||(e.origin||Wr(e))!==window.location.origin)return;const{pathname:i,search:s,hash:o}=e;Ie("go",{pathname:i,search:s,hash:o})&&(t.preventDefault(),t&&t.type==="click"&&window.scrollTo(0,0))}const jr={activate(){window.document.addEventListener("click",dn)},inactivate(){window.document.removeEventListener("click",dn)}},Vr=/Trident/.test(navigator.userAgent);Vr&&!ce(window.PopStateEvent)&&(window.PopStateEvent=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n.state=e.state||null,n},window.PopStateEvent.prototype=window.Event.prototype);function fn(t){if(t.state==="vaadin-router-ignore")return;const{pathname:e,search:n,hash:r}=window.location;Ie("go",{pathname:e,search:n,hash:r})}const Kr={activate(){window.addEventListener("popstate",fn)},inactivate(){window.removeEventListener("popstate",fn)}};var Se=Gn,Gr=Ut,Jr=Zr,qr=jn,Xr=Kn,zn="/",Wn="./",Yr=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function Ut(t,e){for(var n=[],r=0,i=0,s="",o=e&&e.delimiter||zn,c=e&&e.delimiters||Wn,a=!1,l;(l=Yr.exec(t))!==null;){var h=l[0],d=l[1],u=l.index;if(s+=t.slice(i,u),i=u+h.length,d){s+=d[1],a=!0;continue}var f="",m=t[i],A=l[2],y=l[3],$=l[4],T=l[5];if(!a&&s.length){var v=s.length-1;c.indexOf(s[v])>-1&&(f=s[v],s=s.slice(0,v))}s&&(n.push(s),s="",a=!1);var H=f!==""&&m!==void 0&&m!==f,ue=T==="+"||T==="*",ee=T==="?"||T==="*",he=f||o,L=y||$;n.push({name:A||r++,prefix:f,delimiter:he,optional:ee,repeat:ue,partial:H,pattern:L?Qr(L):"[^"+q(he)+"]+?"})}return(s||i<t.length)&&n.push(s+t.substr(i)),n}function Zr(t,e){return jn(Ut(t,e))}function jn(t){for(var e=new Array(t.length),n=0;n<t.length;n++)typeof t[n]=="object"&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(r,i){for(var s="",o=i&&i.encode||encodeURIComponent,c=0;c<t.length;c++){var a=t[c];if(typeof a=="string"){s+=a;continue}var l=r?r[a.name]:void 0,h;if(Array.isArray(l)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but got array');if(l.length===0){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var d=0;d<l.length;d++){if(h=o(l[d],a),!e[c].test(h))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'"');s+=(d===0?a.prefix:a.delimiter)+h}continue}if(typeof l=="string"||typeof l=="number"||typeof l=="boolean"){if(h=o(String(l),a),!e[c].test(h))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+h+'"');s+=a.prefix+h;continue}if(a.optional){a.partial&&(s+=a.prefix);continue}throw new TypeError('Expected "'+a.name+'" to be '+(a.repeat?"an array":"a string"))}return s}}function q(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Qr(t){return t.replace(/([=!:$/()])/g,"\\$1")}function Vn(t){return t&&t.sensitive?"":"i"}function ei(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}function ti(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(Gn(t[i],e,n).source);return new RegExp("(?:"+r.join("|")+")",Vn(n))}function ni(t,e,n){return Kn(Ut(t,n),e,n)}function Kn(t,e,n){n=n||{};for(var r=n.strict,i=n.start!==!1,s=n.end!==!1,o=q(n.delimiter||zn),c=n.delimiters||Wn,a=[].concat(n.endsWith||[]).map(q).concat("$").join("|"),l=i?"^":"",h=t.length===0,d=0;d<t.length;d++){var u=t[d];if(typeof u=="string")l+=q(u),h=d===t.length-1&&c.indexOf(u[u.length-1])>-1;else{var f=u.repeat?"(?:"+u.pattern+")(?:"+q(u.delimiter)+"(?:"+u.pattern+"))*":u.pattern;e&&e.push(u),u.optional?u.partial?l+=q(u.prefix)+"("+f+")?":l+="(?:"+q(u.prefix)+"("+f+"))?":l+=q(u.prefix)+"("+f+")"}}return s?(r||(l+="(?:"+o+")?"),l+=a==="$"?"$":"(?="+a+")"):(r||(l+="(?:"+o+"(?="+a+"))?"),h||(l+="(?="+o+"|"+a+")")),new RegExp(l,Vn(n))}function Gn(t,e,n){return t instanceof RegExp?ei(t,e):Array.isArray(t)?ti(t,e,n):ni(t,e,n)}Se.parse=Gr;Se.compile=Jr;Se.tokensToFunction=qr;Se.tokensToRegExp=Xr;const{hasOwnProperty:ri}=Object.prototype,$t=new Map;$t.set("|false",{keys:[],pattern:/(?:)/});function pn(t){try{return decodeURIComponent(t)}catch{return t}}function ii(t,e,n,r,i){n=!!n;const s=`${t}|${n}`;let o=$t.get(s);if(!o){const l=[];o={keys:l,pattern:Se(t,l,{end:n,strict:t===""})},$t.set(s,o)}const c=o.pattern.exec(e);if(!c)return null;const a=Object.assign({},i);for(let l=1;l<c.length;l++){const h=o.keys[l-1],d=h.name,u=c[l];(u!==void 0||!ri.call(a,d))&&(h.repeat?a[d]=u?u.split(h.delimiter).map(pn):[]:a[d]=u&&pn(u))}return{path:c[0],keys:(r||[]).concat(o.keys),params:a}}function Jn(t,e,n,r,i){let s,o,c=0,a=t.path||"";return a.charAt(0)==="/"&&(n&&(a=a.substr(1)),n=!0),{next(l){if(t===l)return{done:!0};const h=t.__children=t.__children||t.children;if(!s&&(s=ii(a,e,!h,r,i),s))return{done:!1,value:{route:t,keys:s.keys,params:s.params,path:s.path}};if(s&&h)for(;c<h.length;){if(!o){const u=h[c];u.parent=t;let f=s.path.length;f>0&&e.charAt(f)==="/"&&(f+=1),o=Jn(u,e.substr(f),n,s.keys,s.params)}const d=o.next(l);if(!d.done)return{done:!1,value:d.value};o=null,c++}return{done:!0}}}}function si(t){if(ce(t.route.action))return t.route.action(t)}function oi(t,e){let n=e;for(;n;)if(n=n.parent,n===t)return!0;return!1}function ai(t){let e=`Path '${t.pathname}' is not properly resolved due to an error.`;const n=(t.route||{}).path;return n&&(e+=` Resolution had failed on route: '${n}'`),e}function li(t,e){const{route:n,path:r}=e;if(n&&!n.__synthetic){const i={path:r,route:n};if(!t.chain)t.chain=[];else if(n.parent){let s=t.chain.length;for(;s--&&t.chain[s].route&&t.chain[s].route!==n.parent;)t.chain.pop()}t.chain.push(i)}}class He{constructor(e,n={}){if(Object(e)!==e)throw new TypeError("Invalid routes");this.baseUrl=n.baseUrl||"",this.errorHandler=n.errorHandler,this.resolveRoute=n.resolveRoute||si,this.context=Object.assign({resolver:this},n.context),this.root=Array.isArray(e)?{path:"",__children:e,parent:null,__synthetic:!0}:e,this.root.parent=null}getRoutes(){return[...this.root.__children]}setRoutes(e){un(e);const n=[...Qe(e)];this.root.__children=n}addRoutes(e){return un(e),this.root.__children.push(...Qe(e)),this.getRoutes()}removeRoutes(){this.setRoutes([])}resolve(e){const n=Object.assign({},this.context,z(e)?{pathname:e}:e),r=Jn(this.root,this.__normalizePathname(n.pathname),this.baseUrl),i=this.resolveRoute;let s=null,o=null,c=n;function a(l,h=s.value.route,d){const u=d===null&&s.value.route;return s=o||r.next(u),o=null,!l&&(s.done||!oi(h,s.value.route))?(o=s,Promise.resolve(me)):s.done?Promise.reject(Bn(n)):(c=Object.assign(c?{chain:c.chain?c.chain.slice(0):[]}:{},n,s.value),li(c,s.value),Promise.resolve(i(c)).then(f=>f!=null&&f!==me?(c.result=f.result||f,c):a(l,h,f)))}return n.next=a,Promise.resolve().then(()=>a(!0,this.root)).catch(l=>{const h=ai(c);if(l?console.warn(h):l=new Error(h),l.context=l.context||c,l instanceof DOMException||(l.code=l.code||500),this.errorHandler)return c.result=this.errorHandler(l),c;throw l})}static __createUrl(e,n){return new URL(e,n)}get __effectiveBaseUrl(){return this.baseUrl?this.constructor.__createUrl(this.baseUrl,document.baseURI||document.URL).href.replace(/[^\/]*$/,""):""}__normalizePathname(e){if(!this.baseUrl)return e;const n=this.__effectiveBaseUrl,r=this.constructor.__createUrl(e,n).href;if(r.slice(0,n.length)===n)return r.slice(n.length)}}He.pathToRegexp=Se;const{pathToRegexp:_n}=He,mn=new Map;function qn(t,e,n){const r=e.name||e.component;if(r&&(t.has(r)?t.get(r).push(e):t.set(r,[e])),Array.isArray(n))for(let i=0;i<n.length;i++){const s=n[i];s.parent=e,qn(t,s,s.__children||s.children)}}function vn(t,e){const n=t.get(e);if(n&&n.length>1)throw new Error(`Duplicate route with name "${e}". Try seting unique 'name' route properties.`);return n&&n[0]}function gn(t){let e=t.path;return e=Array.isArray(e)?e[0]:e,e!==void 0?e:""}function ci(t,e={}){if(!(t instanceof He))throw new TypeError("An instance of Resolver is expected");const n=new Map;return(r,i)=>{let s=vn(n,r);if(!s&&(n.clear(),qn(n,t.root,t.root.__children),s=vn(n,r),!s))throw new Error(`Route "${r}" not found`);let o=mn.get(s.fullPath);if(!o){let a=gn(s),l=s.parent;for(;l;){const f=gn(l);f&&(a=f.replace(/\/$/,"")+"/"+a.replace(/^\//,"")),l=l.parent}const h=_n.parse(a),d=_n.tokensToFunction(h),u=Object.create(null);for(let f=0;f<h.length;f++)z(h[f])||(u[h[f].name]=!0);o={toPath:d,keys:u},mn.set(a,o),s.fullPath=a}let c=o.toPath(i,e)||"/";if(e.stringifyQueryParams&&i){const a={},l=Object.keys(i);for(let d=0;d<l.length;d++){const u=l[d];o.keys[u]||(a[u]=i[u])}const h=e.stringifyQueryParams(a);h&&(c+=h.charAt(0)==="?"?h:`?${h}`)}return c}}let En=[];function ui(t){En.forEach(e=>e.inactivate()),t.forEach(e=>e.activate()),En=t}const hi=t=>{const e=getComputedStyle(t).getPropertyValue("animation-name");return e&&e!=="none"},di=(t,e)=>{const n=()=>{t.removeEventListener("animationend",n),e()};t.addEventListener("animationend",n)};function yn(t,e){return t.classList.add(e),new Promise(n=>{if(hi(t)){const r=t.getBoundingClientRect(),i=`height: ${r.bottom-r.top}px; width: ${r.right-r.left}px`;t.setAttribute("style",`position: absolute; ${i}`),di(t,()=>{t.classList.remove(e),t.removeAttribute("style"),n()})}else t.classList.remove(e),n()})}const fi=256;function gt(t){return t!=null}function pi(t){const e=Object.assign({},t);return delete e.next,e}function F({pathname:t="",search:e="",hash:n="",chain:r=[],params:i={},redirectFrom:s,resolver:o},c){const a=r.map(l=>l.route);return{baseUrl:o&&o.baseUrl||"",pathname:t,search:e,hash:n,routes:a,route:c||a.length&&a[a.length-1]||null,params:i,redirectFrom:s,getUrl:(l={})=>qe(Z.pathToRegexp.compile(Xn(a))(Object.assign({},i,l)),o)}}function bn(t,e){const n=Object.assign({},t.params);return{redirect:{pathname:e,from:t.pathname,params:n}}}function _i(t,e){e.location=F(t);const n=t.chain.map(r=>r.route).indexOf(t.route);return t.chain[n].element=e,e}function Je(t,e,n){if(ce(t))return t.apply(n,e)}function An(t,e,n){return r=>{if(r&&(r.cancel||r.redirect))return r;if(n)return Je(n[t],e,n)}}function mi(t,e){if(!Array.isArray(t)&&!nt(t))throw new Error(W(`Incorrect "children" value for the route ${e.path}: expected array or object, but got ${t}`));e.__children=[];const n=Qe(t);for(let r=0;r<n.length;r++)Dn(n[r]),e.__children.push(n[r])}function je(t){if(t&&t.length){const e=t[0].parentNode;for(let n=0;n<t.length;n++)e.removeChild(t[n])}}function qe(t,e){const n=e.__effectiveBaseUrl;return n?e.constructor.__createUrl(t.replace(/^\//,""),n).pathname:t}function Xn(t){return t.map(e=>e.path).reduce((e,n)=>n.length?e.replace(/\/$/,"")+"/"+n.replace(/^\//,""):e,"")}class Z extends He{constructor(e,n){const r=document.head.querySelector("base"),i=r&&r.getAttribute("href");super([],Object.assign({baseUrl:i&&He.__createUrl(i,document.URL).pathname.replace(/[^\/]*$/,"")},n));this.resolveRoute=o=>this.__resolveRoute(o);const s=Z.NavigationTrigger;Z.setTriggers.apply(Z,Object.keys(s).map(o=>s[o])),this.baseUrl,this.ready,this.ready=Promise.resolve(e),this.location,this.location=F({resolver:this}),this.__lastStartedRenderId=0,this.__navigationEventHandler=this.__onNavigationEvent.bind(this),this.setOutlet(e),this.subscribe(),this.__createdByRouter=new WeakMap,this.__addedByRouter=new WeakMap}__resolveRoute(e){const n=e.route;let r=Promise.resolve();ce(n.children)&&(r=r.then(()=>n.children(pi(e))).then(s=>{!gt(s)&&!ce(n.children)&&(s=n.children),mi(s,n)}));const i={redirect:s=>bn(e,s),component:s=>{const o=document.createElement(s);return this.__createdByRouter.set(o,!0),o}};return r.then(()=>{if(this.__isLatestRender(e))return Je(n.action,[e,i],n)}).then(s=>{if(gt(s)&&(s instanceof HTMLElement||s.redirect||s===me))return s;if(z(n.redirect))return i.redirect(n.redirect);if(n.bundle)return zr(n.bundle).then(()=>{},()=>{throw new Error(W(`Bundle not found: ${n.bundle}. Check if the file name is correct`))})}).then(s=>{if(gt(s))return s;if(z(n.component))return i.component(n.component)})}setOutlet(e){e&&this.__ensureOutlet(e),this.__outlet=e}getOutlet(){return this.__outlet}setRoutes(e,n=!1){return this.__previousContext=void 0,this.__urlForName=void 0,super.setRoutes(e),n||this.__onNavigationEvent(),this.ready}render(e,n){const r=++this.__lastStartedRenderId,i=Object.assign({search:"",hash:""},z(e)?{pathname:e}:e,{__renderId:r});return this.ready=this.resolve(i).then(s=>this.__fullyResolveChain(s)).then(s=>{if(this.__isLatestRender(s)){const o=this.__previousContext;if(s===o)return this.__updateBrowserHistory(o,!0),this.location;if(this.location=F(s),n&&this.__updateBrowserHistory(s,r===1),Ie("location-changed",{router:this,location:this.location}),s.__skipAttach)return this.__copyUnchangedElements(s,o),this.__previousContext=s,this.location;this.__addAppearingContent(s,o);const c=this.__animateIfNeeded(s);return this.__runOnAfterEnterCallbacks(s),this.__runOnAfterLeaveCallbacks(s,o),c.then(()=>{if(this.__isLatestRender(s))return this.__removeDisappearingContent(),this.__previousContext=s,this.location})}}).catch(s=>{if(r===this.__lastStartedRenderId)throw n&&this.__updateBrowserHistory(i),je(this.__outlet&&this.__outlet.children),this.location=F(Object.assign(i,{resolver:this})),Ie("error",Object.assign({router:this,error:s},i)),s}),this.ready}__fullyResolveChain(e,n=e){return this.__findComponentContextAfterAllRedirects(n).then(r=>{const s=r!==n?r:e,c=qe(Xn(r.chain),r.resolver)===r.pathname,a=(l,h=l.route,d)=>l.next(void 0,h,d).then(u=>u===null||u===me?c?l:h.parent!==null?a(l,h.parent,u):u:u);return a(r).then(l=>{if(l===null||l===me)throw Bn(s);return l&&l!==me&&l!==r?this.__fullyResolveChain(s,l):this.__amendWithOnBeforeCallbacks(r)})})}__findComponentContextAfterAllRedirects(e){const n=e.result;return n instanceof HTMLElement?(_i(e,n),Promise.resolve(e)):n.redirect?this.__redirect(n.redirect,e.__redirectCount,e.__renderId).then(r=>this.__findComponentContextAfterAllRedirects(r)):n instanceof Error?Promise.reject(n):Promise.reject(new Error(W(`Invalid route resolution result for path "${e.pathname}". Expected redirect object or HTML element, but got: "${Br(n)}". Double check the action return value for the route.`)))}__amendWithOnBeforeCallbacks(e){return this.__runOnBeforeCallbacks(e).then(n=>n===this.__previousContext||n===e?n:this.__fullyResolveChain(n))}__runOnBeforeCallbacks(e){const n=this.__previousContext||{},r=n.chain||[],i=e.chain;let s=Promise.resolve();const o=()=>({cancel:!0}),c=a=>bn(e,a);if(e.__divergedChainIndex=0,e.__skipAttach=!1,r.length){for(let a=0;a<Math.min(r.length,i.length)&&!(r[a].route!==i[a].route||r[a].path!==i[a].path&&r[a].element!==i[a].element||!this.__isReusableElement(r[a].element,i[a].element));a=++e.__divergedChainIndex);if(e.__skipAttach=i.length===r.length&&e.__divergedChainIndex==i.length&&this.__isReusableElement(e.result,n.result),e.__skipAttach){for(let a=i.length-1;a>=0;a--)s=this.__runOnBeforeLeaveCallbacks(s,e,{prevent:o},r[a]);for(let a=0;a<i.length;a++)s=this.__runOnBeforeEnterCallbacks(s,e,{prevent:o,redirect:c},i[a]),r[a].element.location=F(e,r[a].route)}else for(let a=r.length-1;a>=e.__divergedChainIndex;a--)s=this.__runOnBeforeLeaveCallbacks(s,e,{prevent:o},r[a])}if(!e.__skipAttach)for(let a=0;a<i.length;a++)a<e.__divergedChainIndex?a<r.length&&r[a].element&&(r[a].element.location=F(e,r[a].route)):(s=this.__runOnBeforeEnterCallbacks(s,e,{prevent:o,redirect:c},i[a]),i[a].element&&(i[a].element.location=F(e,i[a].route)));return s.then(a=>{if(a){if(a.cancel)return this.__previousContext.__renderId=e.__renderId,this.__previousContext;if(a.redirect)return this.__redirect(a.redirect,e.__redirectCount,e.__renderId)}return e})}__runOnBeforeLeaveCallbacks(e,n,r,i){const s=F(n);return e.then(o=>{if(this.__isLatestRender(n))return An("onBeforeLeave",[s,r,this],i.element)(o)}).then(o=>{if(!(o||{}).redirect)return o})}__runOnBeforeEnterCallbacks(e,n,r,i){const s=F(n,i.route);return e.then(o=>{if(this.__isLatestRender(n))return An("onBeforeEnter",[s,r,this],i.element)(o)})}__isReusableElement(e,n){return e&&n?this.__createdByRouter.get(e)&&this.__createdByRouter.get(n)?e.localName===n.localName:e===n:!1}__isLatestRender(e){return e.__renderId===this.__lastStartedRenderId}__redirect(e,n,r){if(n>fi)throw new Error(W(`Too many redirects when rendering ${e.from}`));return this.resolve({pathname:this.urlForPath(e.pathname,e.params),redirectFrom:e.from,__redirectCount:(n||0)+1,__renderId:r})}__ensureOutlet(e=this.__outlet){if(!(e instanceof Node))throw new TypeError(W(`Expected router outlet to be a valid DOM Node (but got ${e})`))}__updateBrowserHistory({pathname:e,search:n="",hash:r=""},i){if(window.location.pathname!==e||window.location.search!==n||window.location.hash!==r){const s=i?"replaceState":"pushState";window.history[s](null,document.title,e+n+r),window.dispatchEvent(new PopStateEvent("popstate",{state:"vaadin-router-ignore"}))}}__copyUnchangedElements(e,n){let r=this.__outlet;for(let i=0;i<e.__divergedChainIndex;i++){const s=n&&n.chain[i].element;if(s)if(s.parentNode===r)e.chain[i].element=s,r=s;else break}return r}__addAppearingContent(e,n){this.__ensureOutlet(),this.__removeAppearingContent();const r=this.__copyUnchangedElements(e,n);this.__appearingContent=[],this.__disappearingContent=Array.from(r.children).filter(s=>this.__addedByRouter.get(s)&&s!==e.result);let i=r;for(let s=e.__divergedChainIndex;s<e.chain.length;s++){const o=e.chain[s].element;o&&(i.appendChild(o),this.__addedByRouter.set(o,!0),i===r&&this.__appearingContent.push(o),i=o)}}__removeDisappearingContent(){this.__disappearingContent&&je(this.__disappearingContent),this.__disappearingContent=null,this.__appearingContent=null}__removeAppearingContent(){this.__disappearingContent&&this.__appearingContent&&(je(this.__appearingContent),this.__disappearingContent=null,this.__appearingContent=null)}__runOnAfterLeaveCallbacks(e,n){if(!!n)for(let r=n.chain.length-1;r>=e.__divergedChainIndex&&this.__isLatestRender(e);r--){const i=n.chain[r].element;if(!!i)try{const s=F(e);Je(i.onAfterLeave,[s,{},n.resolver],i)}finally{this.__disappearingContent.indexOf(i)>-1&&je(i.children)}}}__runOnAfterEnterCallbacks(e){for(let n=e.__divergedChainIndex;n<e.chain.length&&this.__isLatestRender(e);n++){const r=e.chain[n].element||{},i=F(e,e.chain[n].route);Je(r.onAfterEnter,[i,{},e.resolver],r)}}__animateIfNeeded(e){const n=(this.__disappearingContent||[])[0],r=(this.__appearingContent||[])[0],i=[],s=e.chain;let o;for(let c=s.length;c>0;c--)if(s[c-1].route.animate){o=s[c-1].route.animate;break}if(n&&r&&o){const c=nt(o)&&o.leave||"leaving",a=nt(o)&&o.enter||"entering";i.push(yn(n,c)),i.push(yn(r,a))}return Promise.all(i).then(()=>e)}subscribe(){window.addEventListener("vaadin-router-go",this.__navigationEventHandler)}unsubscribe(){window.removeEventListener("vaadin-router-go",this.__navigationEventHandler)}__onNavigationEvent(e){const{pathname:n,search:r,hash:i}=e?e.detail:window.location;z(this.__normalizePathname(n))&&(e&&e.preventDefault&&e.preventDefault(),this.render({pathname:n,search:r,hash:i},!0))}static setTriggers(...e){ui(e)}urlForName(e,n){return this.__urlForName||(this.__urlForName=ci(this)),qe(this.__urlForName(e,n),this)}urlForPath(e,n){return qe(Z.pathToRegexp.compile(e)(n),this)}static go(e){const{pathname:n,search:r,hash:i}=z(e)?this.__createUrl(e,"http://a"):e;return Ie("go",{pathname:n,search:r,hash:i})}}const vi=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,Xe=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function gi(){function t(){return!0}return Yn(t)}function Ei(){try{return yi()?!0:bi()?Xe?!Ai():!gi():!1}catch{return!1}}function yi(){return localStorage.getItem("vaadin.developmentmode.force")}function bi(){return["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0}function Ai(){return!!(Xe&&Object.keys(Xe).map(e=>Xe[e]).filter(e=>e.productionMode).length>0)}function Yn(t,e){if(typeof t!="function")return;const n=vi.exec(t.toString());if(n)try{t=new Function(n[1])}catch(r){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",r)}return t(e)}window.Vaadin=window.Vaadin||{};const wn=function(t,e){if(window.Vaadin.developmentMode)return Yn(t,e)};window.Vaadin.developmentMode===void 0&&(window.Vaadin.developmentMode=Ei());function wi(){}const Si=function(){if(typeof wn=="function")return wn(wi)};window.Vaadin=window.Vaadin||{};window.Vaadin.registrations=window.Vaadin.registrations||[];window.Vaadin.registrations.push({is:"@vaadin/router",version:"1.7.4"});Si();Z.NavigationTrigger={POPSTATE:Kr,CLICK:jr};var M=Uint8Array,oe=Uint16Array,Zn=Uint32Array,Qn=new M([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),er=new M([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$i=new M([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tr=function(t,e){for(var n=new oe(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new Zn(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},nr=tr(Qn,2),rr=nr[0],Ri=nr[1];rr[28]=258,Ri[258]=28;var Ti=tr(er,0),Ci=Ti[0],Rt=new oe(32768);for(var b=0;b<32768;++b){var J=(b&43690)>>>1|(b&21845)<<1;J=(J&52428)>>>2|(J&13107)<<2,J=(J&61680)>>>4|(J&3855)<<4,Rt[b]=((J&65280)>>>8|(J&255)<<8)>>>1}var Pe=function(t,e,n){for(var r=t.length,i=0,s=new oe(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new oe(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var c;if(n){c=new oe(1<<e);var a=15-e;for(i=0;i<r;++i)if(t[i])for(var l=i<<4|t[i],h=e-t[i],d=o[t[i]-1]++<<h,u=d|(1<<h)-1;d<=u;++d)c[Rt[d]>>>a]=l}else for(c=new oe(r),i=0;i<r;++i)t[i]&&(c[i]=Rt[o[t[i]-1]++]>>>15-t[i]);return c},ze=new M(288);for(var b=0;b<144;++b)ze[b]=8;for(var b=144;b<256;++b)ze[b]=9;for(var b=256;b<280;++b)ze[b]=7;for(var b=280;b<288;++b)ze[b]=8;var ir=new M(32);for(var b=0;b<32;++b)ir[b]=5;var Ni=Pe(ze,9,1),Ii=Pe(ir,5,1),Et=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},k=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},yt=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Pi=function(t){return(t+7)/8|0},Oi=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t.BYTES_PER_ELEMENT==2?oe:t.BYTES_PER_ELEMENT==4?Zn:M)(n-e);return r.set(t.subarray(e,n)),r},xi=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],D=function(t,e,n){var r=new Error(e||xi[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,D),!n)throw r;return r},Mt=function(t,e,n){var r=t.length;if(!r||n&&n.f&&!n.l)return e||new M(0);var i=!e||n,s=!n||n.i;n||(n={}),e||(e=new M(r*3));var o=function(Kt){var Gt=e.length;if(Kt>Gt){var Jt=new M(Math.max(Gt*2,Kt));Jt.set(e),e=Jt}},c=n.f||0,a=n.p||0,l=n.b||0,h=n.l,d=n.d,u=n.m,f=n.n,m=r*8;do{if(!h){c=k(t,a,1);var A=k(t,a+1,3);if(a+=3,A)if(A==1)h=Ni,d=Ii,u=9,f=5;else if(A==2){var v=k(t,a,31)+257,H=k(t,a+10,15)+4,ue=v+k(t,a+5,31)+1;a+=14;for(var ee=new M(ue),he=new M(19),L=0;L<H;++L)he[$i[L]]=k(t,a+L*3,7);a+=H*3;for(var Bt=Et(he),mr=(1<<Bt)-1,vr=Pe(he,Bt,1),L=0;L<ue;){var zt=vr[k(t,a,mr)];a+=zt&15;var y=zt>>>4;if(y<16)ee[L++]=y;else{var de=0,We=0;for(y==16?(We=3+k(t,a,3),a+=2,de=ee[L-1]):y==17?(We=3+k(t,a,7),a+=3):y==18&&(We=11+k(t,a,127),a+=7);We--;)ee[L++]=de}}var Wt=ee.subarray(0,v),G=ee.subarray(v);u=Et(Wt),f=Et(G),h=Pe(Wt,u,1),d=Pe(G,f,1)}else D(1);else{var y=Pi(a)+4,$=t[y-4]|t[y-3]<<8,T=y+$;if(T>r){s&&D(0);break}i&&o(l+$),e.set(t.subarray(y,T),l),n.b=l+=$,n.p=a=T*8,n.f=c;continue}if(a>m){s&&D(0);break}}i&&o(l+131072);for(var gr=(1<<u)-1,Er=(1<<f)-1,ct=a;;ct=a){var de=h[yt(t,a)&gr],fe=de>>>4;if(a+=de&15,a>m){s&&D(0);break}if(de||D(2),fe<256)e[l++]=fe;else if(fe==256){ct=a,h=null;break}else{var jt=fe-254;if(fe>264){var L=fe-257,Re=Qn[L];jt=k(t,a,(1<<Re)-1)+rr[L],a+=Re}var ut=d[yt(t,a)&Er],ht=ut>>>4;ut||D(3),a+=ut&15;var G=Ci[ht];if(ht>3){var Re=er[ht];G+=yt(t,a)&(1<<Re)-1,a+=Re}if(a>m){s&&D(0);break}i&&o(l+131072);for(var Vt=l+jt;l<Vt;l+=4)e[l]=e[l-G],e[l+1]=e[l+1-G],e[l+2]=e[l+2-G],e[l+3]=e[l+3-G];l=Vt}}n.l=h,n.p=ct,n.b=l,n.f=c,h&&(c=1,n.m=u,n.d=d,n.n=f)}while(!c);return l==e.length?e:Oi(e,0,l)},Li=new M(0),Ui=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&D(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=t[10]|(t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},Mi=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},Hi=function(t){((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&D(6,"invalid zlib data"),t[1]&32&&D(6,"invalid zlib data: preset dictionaries not supported")};function ki(t,e){return Mt(t,e)}function Fi(t,e){return Mt(t.subarray(Ui(t),-8),e||new M(Mi(t)))}function Di(t,e){return Mt((Hi(t),t.subarray(2,-4)),e)}function Bi(t,e){return t[0]==31&&t[1]==139&&t[2]==8?Fi(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?ki(t,e):Di(t,e)}var zi=typeof TextDecoder!="undefined"&&new TextDecoder,Wi=0;try{zi.decode(Li,{stream:!0}),Wi=1}catch{}var Ht=(t=>(t[t.EN=0]="EN",t[t.FR=1]="FR",t))(Ht||{});const ji={1:"P E A N U T  3000",2:`Copyright  } 1990 Peanut Computer, Inc.
All rights reserved.

CDOS Version 5.01`,3:"2",4:"3",5:".",6:"A",7:"@",8:"PEANUT 3000",10:"R",11:"U",12:"N",13:"P",14:"R",15:"O",16:"J",17:"E",18:"C",19:"T",20:"Shield 9A.5f Ok",21:"Flux % 5.0177 Ok",22:"CDI Vector ok",23:" %%%ddd ok",24:"Race-Track ok",25:"SYNCHROTRON",26:`E: 23%
g: .005

RK: 77.2L

opt: g+

 Shield:
1: OFF
2: ON
3: ON

P~: 1
`,27:"ON",28:"-",33:"|",34:"--- Theoretical study ---",35:" THE EXPERIMENT WILL BEGIN IN    SECONDS",36:"  20",37:"  19",38:"  18",39:"  4",40:"  3",41:"  2",42:"  1",43:"  0",44:"L E T ' S   G O",49:`- Phase 0:
INJECTION of particles
into synchrotron`,50:`- Phase 1:
Particle ACCELERATION.`,51:`- Phase 2:
EJECTION of particles
on the shield.`,52:"A  N  A  L  Y  S  I  S",53:`- RESULT:
Probability of creating:
 ANTIMATTER: 91.V %
 NEUTRINO 27:  0.04 %
 NEUTRINO 424: 18 %
`,54:"   Practical verification Y/N ?",55:"SURE ?",56:`MODIFICATION OF PARAMETERS
RELATING TO PARTICLE
ACCELERATOR (SYNCHROTRON).`,57:"       RUN EXPERIMENT ?",60:"t---t",61:"000 ~",62:".20x14dd",63:"gj5r5r",64:"tilgor 25%",65:"12% 33% checked",66:"D=4.2158005584",67:"d=10.00001",68:"+",69:"*",70:"% 304",71:"gurgle 21",72:"{{{{",73:"Delphine Software",74:"By Eric Chahi",75:"  5",76:"  17",300:"0",301:"1",302:"2",303:"3",304:"4",305:"5",306:"6",307:"7",308:"8",309:"9",310:"A",311:"B",312:"C",313:"D",314:"E",315:"F",316:"        ACCESS CODE:",317:"PRESS BUTTON OR RETURN TO CONTINUE",318:"   ENTER ACCESS CODE",319:"   INVALID PASSWORD !",320:"ANNULER",321:`      INSERT DISK ?








PRESS ANY KEY TO CONTINUE`,322:` SELECT SYMBOLS CORRESPONDING TO
 THE POSITION
 ON THE CODE WHEEL`,323:"    LOADING...",324:"              ERROR",350:"LDKD",351:"HTDC",352:"CLLD",353:"FXLC",354:"KRFK",355:"XDDJ",356:"LBKG",357:"KLFB",358:"TTCT",359:"DDRX",360:"TBHK",361:"BRTD",362:"CKJL",363:"LFCK",364:"BFLX",365:"XJRT",366:"HRTB",367:"HBHK",368:"JCGB",369:"HHFL",370:"TFBB",371:"TXHF",372:"JHJL",385:" BY",386:"ERIC CHAHI",387:"         MUSIC AND SOUND EFFECTS",388:" ",389:"JEAN-FRANCOIS FREITAS",390:"IBM PC VERSION",391:"      BY",392:" DANIEL MORAIS",395:"       THEN PRESS FIRE",396:" PUT THE PADDLE ON THE UPPER LEFT CORNER",397:"PUT THE PADDLE IN CENTRAL POSITION",398:"PUT THE PADDLE ON THE LOWER RIGHT CORNER",400:"Good evening professor.",401:`I see you have driven here in your
Ferrari.`,402:"IDENTIFICATION",403:`AU BOULOT !!!
`,404:`Y
`,500:"Over Two Years in the Making",501:`   A New, State
of the Art, Polygon
  Graphics System`,502:`   Comes to the
Computer With Full
 Screen Graphics`,503:`While conducting a nuclear fission
experiment at your local
particle accelerator ...`,504:`Nature decides to put a little
    extra spin on the ball`,505:"And sends you ...",506:`     Out of this World
A Cinematic Action Adventure
 from Interplay Productions
                    
       By Eric CHAHI      

  IBM version : D.MORAIS
`,600:"      Designed by ..... Eric Chahi",601:"    Programmed by...... Eric Chahi",602:"      Artwork ......... Eric Chahi",603:"Music by ........ Jean-francois Freitas",604:"            Sound effects",605:`        Jean-Francois Freitas
             Eric Chahi`,611:"              Thanks To",612:`           Jesus Martinez

          Daniel Morais

        Frederic Savoir

      Cecile Chahi

    Philippe Delamarre

  Philippe Ulrich

Sebastien Berthet

Pierre Gousseau`,613:"Now Go Out Of This World"},Sn={34:"--- Etude theorique ---",35:" L'EXPERIENCE DEBUTERA DANS    SECONDES.",36:"20",37:"19",38:"18",39:"4",40:"3",41:"2",42:"1",43:"0",49:`- Phase 0:
INJECTION des particules
dans le synchrotron`,50:`- Phase 1:
ACCELERATION des particules.`,51:`- Phase 2:
EJECTION des particules
sur le bouclier.`,52:"A  N  A  L  Y  S  E",53:`- RESULTAT:
Probabilites de creer de:
 ANTI-MATIERE: 91.V %
 NEUTRINO 27:  0.04 %
 NEUTRINO 424: 18 %
`,54:"Verification par la pratique O/N ?",55:"SUR ?",56:`MODIFICATION DES PARAMETRES
RELATIFS A L'ACCELERATEUR
DE PARTICULES (SYNCHROTRON).`,57:"SIMULATION DE L'EXPERIENCE ?",75:"5",76:"17",316:"       CODE D'ACCES:",317:"PRESSEZ LE BOUTON POUR CONTINUER",318:"   ENTRER LE CODE D'ACCES",319:"MOT DE PASSE INVALIDE !",321:`     INSEREZ LA DISQUETTE ?








PRESSEZ UNE TOUCHE POUR CONTINUER`,322:`SELECTIONNER LES SYMBOLES CORRESPONDANTS
A LA POSITION
DE LA ROUE DE PROTECTION`,323:"CHARGEMENT...",324:"             ERREUR",385:"PAR",387:"          MUSIQUES ET BRUITAGES",388:"DE",390:"VERSION IBM PC",391:"      PAR",395:"PUIS PRESSER LE BOUTON",396:"POSITIONNER LE JOYSTICK EN HAUT A GAUCHE",397:" POSITIONNER LE JOYSTICK AU CENTRE",398:" POSITIONNER LE JOYSTICK EN BAS A DROITE",400:"Bonsoir professeur.",401:`Je vois que Monsieur a pris
sa Ferrari.`,404:"O",600:"       Conception ..... Eric Chahi",601:"    Programmation ..... Eric Chahi",602:"     Graphismes ....... Eric Chahi",603:"Musique de ...... Jean-francois Freitas",604:"              Bruitages",611:"               Merci a",613:"Now Go Back To Another Earth"},Vi=[0,0,0,0,0,0,0,0,16,16,16,16,16,0,16,0,40,40,0,0,0,0,0,0,0,36,126,36,36,126,36,0,8,62,72,60,18,124,16,0,66,164,72,16,36,74,132,0,96,144,144,112,138,132,122,0,8,8,16,0,0,0,0,0,6,8,16,16,16,8,6,0,192,32,16,16,16,32,192,0,0,68,40,16,40,68,0,0,0,16,16,124,16,16,0,0,0,0,0,0,0,16,16,32,0,0,0,124,0,0,0,0,0,0,0,0,16,40,16,0,0,4,8,16,32,64,0,0,120,132,140,148,164,196,120,0,16,48,80,16,16,16,124,0,120,132,4,8,48,64,252,0,120,132,4,56,4,132,120,0,8,24,40,72,252,8,8,0,252,128,248,4,4,132,120,0,56,64,128,248,132,132,120,0,252,4,4,8,16,32,64,0,120,132,132,120,132,132,120,0,120,132,132,124,4,8,112,0,0,24,24,0,0,24,24,0,0,0,24,24,0,16,16,96,4,8,16,32,16,8,4,0,0,0,254,0,0,254,0,0,32,16,8,4,8,16,32,0,124,130,2,12,16,0,16,0,48,24,12,12,12,24,48,0,120,132,132,252,132,132,132,0,248,132,132,248,132,132,248,0,120,132,128,128,128,132,120,0,248,132,132,132,132,132,248,0,124,64,64,120,64,64,124,0,252,128,128,240,128,128,128,0,124,128,128,140,132,132,124,0,132,132,132,252,132,132,132,0,124,16,16,16,16,16,124,0,4,4,4,4,132,132,120,0,140,144,160,224,144,136,132,0,128,128,128,128,128,128,252,0,130,198,170,146,130,130,130,0,132,196,164,148,140,132,132,0,120,132,132,132,132,132,120,0,248,132,132,248,128,128,128,0,120,132,132,132,132,140,124,3,248,132,132,248,144,136,132,0,120,132,128,120,4,132,120,0,124,16,16,16,16,16,16,0,132,132,132,132,132,132,120,0,132,132,132,132,132,72,48,0,130,130,130,130,146,170,198,0,130,68,40,16,40,68,130,0,130,68,40,16,16,16,16,0,252,4,8,16,32,64,252,0,60,48,48,48,48,48,60,0,60,48,48,48,48,48,60,0,60,48,48,48,48,48,60,0,60,48,48,48,48,48,60,0,0,0,0,0,0,0,0,254,60,48,48,48,48,48,60,0,0,0,56,4,60,68,60,0,64,64,120,68,68,68,120,0,0,0,60,64,64,64,60,0,4,4,60,68,68,68,60,0,0,0,56,68,124,64,60,0,56,68,64,96,64,64,64,0,0,0,60,68,68,60,4,120,64,64,88,100,68,68,68,0,16,0,16,16,16,16,16,0,2,0,2,2,2,2,66,60,64,64,70,72,112,72,70,0,16,16,16,16,16,16,16,0,0,0,236,146,146,146,146,0,0,0,120,68,68,68,68,0,0,0,56,68,68,68,56,0,0,0,120,68,68,120,64,64,0,0,60,68,68,60,4,4,0,0,76,112,64,64,64,0,0,0,60,64,56,4,120,0,16,16,60,16,16,16,12,0,0,0,68,68,68,68,120,0,0,0,68,68,68,40,16,0,0,0,130,130,146,170,198,0,0,0,68,40,16,40,68,0,0,0,66,34,36,24,8,48,0,0,124,8,16,32,124,0,96,144,32,64,240,0,0,0,254,254,254,254,254,254,254,0,56,68,186,162,186,68,56,0,56,68,130,130,68,40,238,0,85,170,85,170,85,170,85,170];function Ki(t){switch(t){default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function Gi(t){switch(t){default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}let sr=!0,Tt,O;var ke=(t=>(t[t.PROTECTION=16e3]="PROTECTION",t[t.INTRODUCTION=16001]="INTRODUCTION",t[t.WATER=16002]="WATER",t[t.JAIL=16003]="JAIL",t[t.CITY=16004]="CITY",t[t.ARENA=16005]="ARENA",t[t.BATHS=16006]="BATHS",t[t.FINAL=16007]="FINAL",t[t.CODE=16008]="CODE",t[t.CODE2=16009]="CODE2",t))(ke||{});const Ji="ootw",qi="ootw-demo";(async function(){try{const e=await Gi(`./data/${Ji}.js`);console.log("loaded ootw.js"),sr=!1,Tt={[16e3]:[e.data14,e.size14,e.data15,e.size15,e.data16,e.size16,null,null],[16001]:[e.data17,e.size17,e.data18,e.size18,e.data19,e.size19,null,null],[16002]:[e.data1a,e.size1a,e.data1b,e.size1b,e.data1c,e.size1c,e.data11,e.size11],[16003]:[e.data1d,e.size1d,e.data1e,e.size1e,e.data1f,e.size1f,e.data11,e.size11],[16004]:[e.data20,e.size20,e.data21,e.size21,e.data22,e.size22,e.data11,e.size11],[16005]:[e.data23,e.size23,e.data24,e.size24,e.data25,e.size25,e.data11,e.size11],[16006]:[e.data26,e.size26,e.data27,e.size27,e.data28,e.size28,e.data11,e.size11],[16007]:[e.data29,e.size29,e.data2a,e.size2a,e.data2b,e.size2b,e.data11,e.size11],[16008]:[e.data7d,e.size7d,e.data7e,e.size7e,e.data7f,e.size7f,null,null],[16009]:[e.data7d,e.size7d,e.data7e,e.size7e,e.data7f,e.size7f,null,null]},O={bitmaps:e.bitmaps,sounds:e.sounds,modules:e.modules}}catch{const n=await Ki(`./data/${qi}.js`);console.log("loaded ootw-demo.js"),Tt={[16001]:[n.data17,n.size17,n.data18,n.size18,n.data19,n.size19,null,null],[16002]:[n.data1a,n.size1a,n.data1b,n.size1b,n.data1c,n.size1c,n.data11,n.size11]},O={bitmaps:n.bitmaps,sounds:n.sounds,modules:n.modules}}})();function Xi(){return O!=null&&O.modules?(Object.entries(O.modules).forEach(([,t])=>{const[e,n]=t;t.push(K(e,n))}),!0):!1}function Yi(){return O!=null&&O.sounds?(Object.entries(O.sounds).forEach(([,t])=>{const[e,n]=t;t.push(K(e,n))}),!0):!1}function K(t,e){if(!t)return null;if(t=atob(t),t.length!=e){let r=t.length,i=new Uint8Array(r);for(let o=0;o<r;o++)i[o]=t.charCodeAt(o);let s=Bi(i);return console.assert(s.length==e),s}let n=new Uint8Array(e);for(let r=0;r<t.length;++r)n[r]=t.charCodeAt(r)&255;return n}var Ct=(t=>(t[t.AMIGA=0]="AMIGA",t[t.EGA=1]="EGA",t[t.VGA=2]="VGA",t))(Ct||{});const bt=[0,0,0,0,0,170,0,170,0,0,170,170,170,0,0,170,0,170,170,85,0,170,170,170,85,85,85,85,85,255,85,255,85,85,255,255,255,85,85,255,85,255,255,255,85,255,255,255];let or=new Uint32Array(256*3),lt=new Uint32Array(16*3),Fe,Zi=0;function Qi(t){Fe=t}function es(t){for(let e=0;e<16;++e){let n=Fe[t+e*2]<<8|Fe[t+e*2+1];n=(n>>12&15)*3,lt[1*16+e]=4278190080|bt[n+2]<<16|bt[n+1]<<8|bt[n]}}function $n(t,e){for(let n=0;n<16;++n){const r=Fe[t+n*2]<<8|Fe[t+n*2+1];let i=r>>8&15;i=i<<4|i;let s=r>>4&15;s=s<<4|s;let o=r&15;o=o<<4|o,lt[e*16+n]=4278190080|o<<16|s<<8|i}}function ts(t){let e=0;for(let n=0;n<256;++n)or[n]=4278190080|t[e+2]<<16|t[e+1]<<8|t[e],e+=3}let Nt=320*2,It=200*2,ar;function ns(t,e){let n=ar.getContext("2d"),r=n.getImageData(0,0,Nt,It),i=new Uint32Array(r.data.buffer);for(let s=0;s<Nt*It;++s){const o=t[e+s];o<16?i[s]=lt[Zi*16+o]:i[s]=or[o-16]}n.putImageData(r,0,0)}function rs(t,e,n,r){ar=t,Nt=e,It=n}var w=(t=>(t[t.RANDOM_SEED=60]="RANDOM_SEED",t[t.LAST_KEYCHAR=218]="LAST_KEYCHAR",t[t.HERO_POS_UP_DOWN=229]="HERO_POS_UP_DOWN",t[t.SCROLL_Y=249]="SCROLL_Y",t[t.HERO_ACTION=250]="HERO_ACTION",t[t.HERO_POS_JUMP_DOWN=251]="HERO_POS_JUMP_DOWN",t[t.HERO_POS_LEFT_RIGHT=252]="HERO_POS_LEFT_RIGHT",t[t.HERO_POS_MASK=253]="HERO_POS_MASK",t[t.HERO_ACTION_POS_MASK=254]="HERO_ACTION_POS_MASK",t[t.PAUSE_SLICES=255]="PAUSE_SLICES",t[t.MUSIC_SYNC=244]="MUSIC_SYNC",t[t.WTF=247]="WTF",t[t.HACK_VAR_54=84]="HACK_VAR_54",t[t.HACK_VAR_67=103]="HACK_VAR_67",t[t.HACK_VAR_DC=220]="HACK_VAR_DC",t[t.HACK_VAR_F7=247]="HACK_VAR_F7",t[t.HACK_VAR_BC=188]="HACK_VAR_BC",t[t.HACK_VAR_F2=242]="HACK_VAR_F2",t[t.HACK_VAR_C6=198]="HACK_VAR_C6",t[t.HACK_VAR_E4=228]="HACK_VAR_E4",t))(w||{});const p=new Array(256),R=new Array(64);var lr=(t=>(t[t.UP=1]="UP",t[t.RIGHT=2]="RIGHT",t[t.DOWN=3]="DOWN",t[t.LEFT=4]="LEFT",t[t.ACTION=5]="ACTION",t[t.JUMP=6]="JUMP",t[t.FF=7]="FF",t))(lr||{});let X=new Array(6),cr=new Array(6);function Ve(t){return typeof t=="object"?t.pressed:t===1}function is(){const t=navigator.getGamepads();if(!t)return;const e=t[0];e&&(X[1]=e.axes[1]<-.5,X[3]=e.axes[1]>.5,X[4]=e.axes[0]<-.5,X[2]=e.axes[0]>.5,X[6]=Ve(e.buttons[1]),X[5]=Ve(e.buttons[0]),X[7]=Ve(e.buttons[5])||Ve(e.buttons[7]))}function re(t){return cr[t]||X[t]}const Rn={" ":5,Enter:5,Shift:6,ArrowUp:1,ArrowDown:3,ArrowLeft:4,ArrowRight:2,f:7};function Tn(t,e){if(t.key in Rn){t.preventDefault();const n=Rn[t.key];cr[n]=e}}function ss(){document.onkeydown=function(t){Tn(t,1)},document.onkeyup=function(t){Tn(t,0)}}function os(){let t=0;p[w.HERO_POS_LEFT_RIGHT]=0,p[w.HERO_POS_JUMP_DOWN]=0,p[w.HERO_POS_UP_DOWN]=0,p[w.HERO_ACTION]=0,re(2)?(p[w.HERO_POS_LEFT_RIGHT]=1,t|=1):re(4)&&(p[w.HERO_POS_LEFT_RIGHT]=-1,t|=2),re(3)?(p[w.HERO_POS_UP_DOWN]=1,t|=4):re(1)&&(p[w.HERO_POS_UP_DOWN]=-1,t|=8),re(6)&&(p[w.HERO_POS_JUMP_DOWN]=-1,t|=8),p[w.HERO_POS_MASK]=t,re(5)&&(p[w.HERO_ACTION]=1,t|=128),p[w.HERO_ACTION_POS_MASK]=t}(function(){var t,e=[];function n(s){var o=this,c={},a=-1;this.parameters.forEach(function(d,u){var f=e[++a]||(e[a]=new Float32Array(o.bufferSize));f.fill(d.value),c[u]=f}),this.processor.realm.exec("self.sampleRate=sampleRate="+this.context.sampleRate+";self.currentTime=currentTime="+this.context.currentTime);var l=r(s.inputBuffer),h=r(s.outputBuffer);this.instance.process([l],[h],c)}function r(s){for(var o=[],c=0;c<s.numberOfChannels;c++)o[c]=s.getChannelData(c);return o}function i(s){return s.$$processors||(s.$$processors={})}typeof AudioWorkletNode=="function"&&"audioWorklet"in AudioContext.prototype||(self.AudioWorkletNode=function(s,o,c){var a=i(s)[o],l=s.createScriptProcessor(void 0,2,c&&c.outputChannelCount?c.outputChannelCount[0]:2);if(l.parameters=new Map,a.properties)for(var h=0;h<a.properties.length;h++){var d=a.properties[h],u=s.createGain().gain;u.value=d.defaultValue,l.parameters.set(d.name,u)}var f=new MessageChannel;t=f.port2;var m=new a.Processor(c||{});return t=null,l.port=f.port1,l.processor=a,l.instance=m,l.onaudioprocess=n,l},Object.defineProperty((self.AudioContext||self.webkitAudioContext).prototype,"audioWorklet",{get:function(){return this.$$audioWorklet||(this.$$audioWorklet=new self.AudioWorklet(this))}}),self.AudioWorklet=function(){function s(o){this.$$context=o}return s.prototype.addModule=function(o,c){var a=this;return fetch(o).then(function(l){if(!l.ok)throw Error(l.status);return l.text()}).then(function(l){var h={sampleRate:a.$$context.sampleRate,currentTime:a.$$context.currentTime,AudioWorkletProcessor:function(){this.port=t},registerProcessor:function(u,f){i(a.$$context)[u]={realm:d,context:h,Processor:f,properties:f.parameterDescriptors||[]}}};h.self=h;var d=new function(u,f){var m=document.createElement("iframe");m.style.cssText="position:absolute;left:0;top:-999px;width:1px;height:1px;",f.appendChild(m);var A=m.contentWindow,y=A.document,$="var window,$hook";for(var T in A)T in u||T==="eval"||($+=",",$+=T);for(var v in u)$+=",",$+=v,$+="=self.",$+=v;var H=y.createElement("script");H.appendChild(y.createTextNode(`function $hook(self,console) {"use strict";
        `+$+";return function() {return eval(arguments[0])}}")),y.body.appendChild(H),this.exec=A.$hook.call(u,u,console)}(h,document.documentElement);return d.exec((c&&c.transpile||String)(l)),null})},s}())})();const Cn=()=>({orderTable:new Array(128),curOrder:0,numOrder:0,curPos:0,data:null,samples:new Array(15).fill(null).map(()=>({data:null,volume:0}))}),as=()=>({sample:null,volume:0,loops:0,loop:0});function pe(t,e){return t[e]<<8|t[e+1]}class ls{constructor(){this._delay=0,this._resNum=0,this._sfxMod=Cn(),this._rate=0,this._channels=new Array(4).fill(null),this._modifyVarCallback=null,this._audioContext=new window.AudioContext,this.resumeAudio()}setModifyVarCallback(e){this._modifyVarCallback=e}async init(){await this.initAudio(),this.initEvents()}async initAudio(){try{this._rate=this._audioContext.sampleRate,await this._audioContext.audioWorklet.addModule("assets/processors.js"),this._sfxRawWorklet=new AudioWorkletNode(this._audioContext,"sfxraw-processor",{outputChannelCount:[1],numberOfInputs:0,numberOfOutputs:1}),this._sfxRawWorklet.port.onmessage=this.onSFXRawProcessorMessage.bind(this),this._sfxRawWorklet.port.start(),this._sfxPlayerWorklet=new AudioWorkletNode(this._audioContext,"sfxplayer-processor",{outputChannelCount:[2],numberOfInputs:0,numberOfOutputs:1}),this._sfxPlayerWorklet.port.onmessage=this.onSFXPlayerProcessorMessage.bind(this),this._sfxPlayerWorklet.port.start(),this._sfxRawWorklet.connect(this._audioContext.destination),this._sfxPlayerWorklet.connect(this._audioContext.destination),this.postMessageToSFXPlayerProcessor({message:"init",mixingRate:this._rate}),this.postMessageToSFXRawProcessor({message:"init",mixingRate:this._rate})}catch(e){console.error(`Error during initAudio: ${e} ${e.stack}`)}}initEvents(){document.addEventListener("click",()=>this.resumeAudio())}resumeAudio(){this._audioContext&&this._audioContext.state==="suspended"&&this._audioContext.resume()}setEventsDelay(e,n=!1){this._delay=e*60/7050>>0,n&&this.postMessageToSFXPlayerProcessor({message:"setEventsDelay",delay:this._delay})}onSFXPlayerProcessorMessage(e){const n=e.data;switch(n.message){case"syncVar":const{variable:r,value:i}=n;this._modifyVarCallback(r,i);break}}onSFXRawProcessorMessage(e){}postMessageToSFXPlayerProcessor(e){this._sfxPlayerWorklet?this._sfxPlayerWorklet.port.postMessage(e):console.warn("Cannot send message to sfx player processor: not available")}postMessageToSFXRawProcessor(e){this._sfxRawWorklet?this._sfxRawWorklet.port.postMessage(e):console.warn("Cannot send message to raw player processor: not available")}loadSfxModule(e,n,r,i){const[,,s]=i.modules[e];if(s){this._resNum=e,this._sfxMod=Cn(),this._sfxMod.curOrder=r,this._sfxMod.numOrder=pe(s,62);for(let o=0;o<128;++o)this._sfxMod.orderTable[o]=s[64+o];n===0&&(n=pe(s,0)),this.setEventsDelay(n),this._sfxMod.data=new Uint8Array(s.buffer,192),this.prepareInstruments(new Uint8Array(s.buffer,2),i.sounds),this.postMessageToSFXPlayerProcessor({message:"load",sfxMod:this._sfxMod,delay:this._delay})}else debugger}prepareInstruments(e,n){let r=0;for(let i=0;i<15;++i){const s=this._sfxMod.samples[i],o=pe(e,r);if(r+=2,o!==0){s.volume=pe(e,r);const c=n[o];c&&c[2]?s.data=c[2]:console.error(`Error loading instrument 0x${o.toString(16)}`)}r+=2}}startMusic(){this.postMessageToSFXPlayerProcessor({message:"start"})}stopMusic(){this.postMessageToSFXPlayerProcessor({message:"stop"})}playMusic(){this.stopMusic(),this.postMessageToSFXPlayerProcessor({message:"play",mixingRate:this._rate})}pause(){this.postMessageToSFXRawProcessor({message:"pause"}),this.postMessageToSFXPlayerProcessor({message:"pause"})}resume(){this.postMessageToSFXRawProcessor({message:"resume"}),this.postMessageToSFXPlayerProcessor({message:"resume"})}playSoundRaw(e,n,r,i){let s=pe(n,0)*2;const o=pe(n,2)*2;o!==0&&(s=o);const c=new Int8Array(n.buffer,8,s||n.byteLength-8);if(c){const a=as();a.loops=o!==0?-1:0,a.volume=i,a.freq=r,a.sample=c,this.postMessageToSFXRawProcessor({message:"play",sound:a,channel:e})}}stopSoundChannel(e){this.postMessageToSFXRawProcessor({message:"stop",channel:e})}}const cs=[3327,3523,3729,3951,4182,4430,4697,4972,5279,5593,5926,6280,6653,7046,7457,7902,8363,8860,9395,9943,10559,11186,11852,12560,13307,14093,14915,15839,16727,17720,18840,19886,21056,22372,23706,25032,26515,28185,29829,31677];let g;async function us(){g=new ls,await g.init(),Yi()||(console.log("error loading sounds"),g=null),Xi()}function hs(t,e,n){g!==null&&(t!==0?(g.loadSfxModule(t,e,n,O),g.startMusic(),g.playMusic()):e!==0?g.setEventsDelay(e,!0):g.stopMusic())}function ds(t,e,n,r){if(g!==null){if(n===0){g.stopSoundChannel(r);return}n>63&&(n=63);try{if(O.sounds&&O.sounds[t]){const[,,i]=O.sounds[t];i&&(e>=40&&console.error("Assertion failed: $({freq} < 40"),g.playSoundRaw(r&3,i,cs[e],n))}}catch{console.error(`Could not play raw sound ${t}`);debugger}}}var E=(t=>(t[t.movConst=0]="movConst",t[t.mov=1]="mov",t[t.add=2]="add",t[t.addConst=3]="addConst",t[t.call=4]="call",t[t.ret=5]="ret",t[t.pauseThread=6]="pauseThread",t[t.jmp=7]="jmp",t[t.setSetVect=8]="setSetVect",t[t.jnz=9]="jnz",t[t.condJmp=10]="condJmp",t[t.setPalette=11]="setPalette",t[t.resetThread=12]="resetThread",t[t.selectVideoPage=13]="selectVideoPage",t[t.fillVideoPage=14]="fillVideoPage",t[t.copyVideoPage=15]="copyVideoPage",t[t.blitFramebuffer=16]="blitFramebuffer",t[t.killThread=17]="killThread",t[t.drawString=18]="drawString",t[t.sub=19]="sub",t[t.and=20]="and",t[t.or=21]="or",t[t.shl=22]="shl",t[t.shr=23]="shr",t[t.playSound=24]="playSound",t[t.updateMemList=25]="updateMemList",t[t.playMusic=26]="playMusic",t))(E||{});const fs=128,ps=64,_s=!0;let ms=Ht.EN;const x=3,P=320*x,$e=200*x,U=P*$e,vs=50;let S=new Uint8Array(4*U),De,ve,rt,Oe=-1,kt,Pt,ur,N,Ot,it,j,Ft=0,Ne;function _(){const t=kt[N];return N+=1,t}function gs(t,e){return t[e]<<8|t[e+1]}function C(){const t=gs(kt,N);return N+=2,t}function ne(t,e){const n=1<<e-1;return t-((t&n)<<1)}function Es(){for(;!it;){const t=_();if(t&fs){const e=(t<<8|_())<<1&65534;let n=_(),r=_(),i=r-199;i>0&&(r=199,n+=i),xt(Pt,e,255,64,n,r)}else if(t&ps){const e=C()<<1&65534;let n=_();(t&32)==0?(t&16)==0?n=n<<8|_():n=p[n]:t&16&&(n+=256);let r=_();(t&8)==0&&((t&4)==0?r=r<<8|_():r=p[r]);let i=Pt,s=64;(t&2)==0?t&1&&(s=p[_()]):t&1?i=ur:s=_(),xt(i,e,255,s,n,r)}else console.assert(t<=26),Nn[t]?Nn[t]():console.log(`opcode ${t} not implemented`)}}function ys(){j!=0&&(hr(j),Ft=j,j=0);for(let t=0;t<R.length;++t){R[t].state=R[t].next_state;const e=R[t].next_offset;e!=-1&&(R[t].offset=e==-2?-1:e,R[t].next_offset=-1)}is(),os();for(let t=0;t<R.length;++t)if(R[t].state==0){const e=R[t].offset;e!=-1&&(N=e,R[t].stack.length=0,Ot=t,it=!1,Es(),R[t].offset=N)}}function hr(t,e=0){const n=Tt[t];if(!n)throw"Part not found: "+t;Qi(K(n[0],n[1])),kt=K(n[2],n[3]),Pt=K(n[4],n[5]),ur=K(n[6],n[7]);for(let r=0;r<R.length;++r)R[r]={state:0,next_state:0,offset:-1,next_offset:-1,stack:[]};R[0].offset=0,p[0]=e}function ae(t){return t==255?rt:t==254?ve:(console.assert(t<4),t)}function bs(t,e){t=ae(t),S.fill(e,t*U,(t+1)*U)}function As(t,e,n){if(e=ae(e),t>=254)t=ae(t),S.set(S.subarray(t*U,(t+1)*U),e*U);else{if((t&128)==0&&(n=0),t=ae(t&3),e==t)return;const r=e*U,i=t*U;if(n==0)S.set(S.subarray(i,i+U),r);else if(n*=x,n>-P&&n<P){const s=n*P;n<0?S.set(S.subarray(i-s,i+U),r):S.set(S.subarray(i,i+U-s),r+s)}}}function ws(t,e,n,r){if(n<0||n>=P||r<0||r>=$e)return;const i=t*U+r*P+n;e==17?(console.assert(t!=0),S[i]=S[r*P+n]):e==16?S[i]|=8:(console.assert(e<16),S[i]=e)}function Ss(t,e,n,r,i){if(r>i){const o=r;r=i,i=o}if(r>=P||i<0)return;r<0&&(r=0),i>=P&&(i=P-1);const s=t*U+n*P;if(e==17)console.assert(t!=0),S.set(S.subarray(n*P+r,n*P+i+1),s+r);else if(e==16)for(let o=r;o<=i;++o)S[s+o]|=8;else console.assert(e<16),S.fill(e,s+r,s+i+1)}function $s(t,e,n){let r=0,i=n.length-1,s=Math.min(n[r].y,n[i].y),o=n[r++].x<<16,c=n[i--].x<<16,a=n.length;for(a-=2;a!=0;a-=2){const l=n[i].y-n[i+1].y,h=(n[i].x-n[i+1].x<<16)/(l==0?1:l)>>0;i-=1;const d=n[r].y-n[r-1].y,u=(n[r].x-n[r-1].x<<16)/(d==0?1:d)>>0;if(r+=1,c=c&4294901760|32767,o=o&4294901760|32768,d==0)c+=h,o+=u;else for(let f=0;f<d;++f)if(s>=0&&Ss(t,e,s,c>>16,o>>16),c+=h,o+=u,s+=1,s>=$e)return}}function Rs(t,e,n,r,i,s){const o=t[e++]*r/64>>0,c=t[e++]*r/64>>0,a=i*x-o*x/2>>0,l=i*x+o*x/2>>0,h=s*x-c*x/2>>0,d=s*x+c*x/2>>0;if(a>=P||l<0||h>=$e||d<0)return;const u=t[e++];console.assert((u&1)==0);let f=new Array;for(let m=0;m<u;++m){const A=a+(t[e++]*r/64>>0)*x,y=h+(t[e++]*r/64>>0)*x;f.push({x:A,y})}u==4&&o==0&&c<=1?ws(De,n,a,h):$s(De,n,f)}function Ts(t,e,n,r,i){const s=r-t[e++]*n/64>>0,o=i-t[e++]*n/64>>0,c=t[e++];for(let a=0;a<=c;++a){const l=t[e]<<8|t[e+1];e+=2;const h=s+t[e++]*n/64>>0,d=o+t[e++]*n/64>>0;let u=255;l&32768&&(u=t[e]&127,e+=2),xt(t,l<<1&65534,u,n,h,d)}}function xt(t,e,n,r,i,s){const o=t[e++];o>=192?(n&128&&(n=o&63),Rs(t,e,n,r,i,s)):(o&63)==2&&Ts(t,e,r,i,s)}function dr(t,e,n,r){let i=t*U+(n*P+e)*x;for(let s=0;s<x;++s)S.fill(r,i,i+x),i+=P}function Cs(t,e,n,r,i){if(r<320/8&&i<200-8)for(let s=0;s<8;++s){const o=Vi[(e-32)*8+s];for(let c=0;c<8;++c)(o&1<<7-c)!=0&&dr(t,r*8+c,i+s,n)}}function Ns(t,e,n,r){let i=ji;if(ms==Ht.FR&&t in Sn&&(i=Sn),t in i){const s=i[t];Is(s,e,n,r)}}function Is(t,e,n,r){const i=n;for(let s=0;s<t.length;++s){const o=t.charCodeAt(s);o==10?(r+=8,n=i):(Cs(De,o,e,n,r),n+=1)}}function Ps(t){const e=O.bitmaps[t],n=e[1];console.assert(n==32e3);const r=K(e[0],n);let i=0;for(let s=0;s<200;++s)for(let o=0;o<320;o+=8){for(let c=0;c<8;++c){const a=1<<7-c;let l=0;for(let h=0;h<4;++h)r[i+h*8e3]&a&&(l|=1<<h);dr(0,o+c,s,l)}i+=1}}function Os(t){if(t!=254)if(t==255){const e=ve;ve=rt,rt=e}else ve=ae(t);if(Oe!=-1){const e=Oe*32;$n(e,Ct.AMIGA),es(e+1024),$n(e+1024,Ct.VGA),Oe=-1}ns(S,ve*U)}const Nn={[E.movConst](){const t=_(),e=ne(C(),16);p[t]=e},[E.mov](){const t=_(),e=_();p[t]=p[e]},[E.add](){const t=_(),e=_();p[t]+=p[e]},[E.addConst](){const t=_(),e=ne(C(),16);p[t]+=e},[E.call](){const t=C();R[Ot].stack.push(N),N=t},[E.ret](){N=R[Ot].stack.pop()},[E.pauseThread](){it=!0},[E.jmp](){N=C()},[E.setSetVect](){const t=_(),e=C();R[t].next_offset=e},[E.jnz](){const t=_();p[t]-=1;const e=C();p[t]!=0&&(N=e)},[E.condJmp](){const t=_(),e=p[_()];let n;t&128?n=p[_()]:t&64?n=ne(C(),16):n=_();const r=C();switch(t&7){case 0:e==n&&(N=r);break;case 1:e!=n&&(N=r);break;case 2:e>n&&(N=r);break;case 3:e>=n&&(N=r);break;case 4:e<n&&(N=r);break;case 5:e<=n&&(N=r);break}},[E.setPalette](){Oe=C()>>8},[E.resetThread](){const t=_(),e=_(),n=_();if(n==2)for(let r=t;r<=e;++r)R[r].next_offset=-2;else{console.assert(n==0||n==1);for(let r=t;r<=e;++r)R[r].next_state=n}},[E.selectVideoPage](){const t=_();De=ae(t)},[E.fillVideoPage](){const t=_(),e=_();bs(t,e)},[E.copyVideoPage](){const t=_(),e=_();As(t,e,p[w.SCROLL_Y])},[E.blitFramebuffer](){const t=_();if(!re(lr.FF)&&p[w.PAUSE_SLICES]!==0){const n=Date.now()-Ne,r=p[w.PAUSE_SLICES]*1e3/vs-n;if(r>0){const i=Ne+r;for(;Ne<i;)Ne=Date.now()}}Ne=Date.now(),p[w.WTF]=0,Os(t)},[E.killThread](){N=-1,it=!0},[E.drawString](){const t=C(),e=_(),n=_(),r=_();Ns(t,r,e,n)},[E.sub](){const t=_(),e=_();p[t]-=p[e]},[E.and](){const t=_(),e=C();p[t]=ne(p[t]&e&65535,16)},[E.or](){const t=_(),e=C();p[t]=ne((p[t]|e)&65535,16)},[E.shl](){const t=_(),e=C()&15;p[t]=ne(p[t]<<e&65535,16)},[E.shr](){const t=_(),e=C()&15;p[t]=ne((p[t]&65535)>>e,16)},[E.playSound](){const t=C(),e=_(),n=_(),r=_();ds(t,e,n,r)},[E.updateMemList](){const t=C();if(t>ke.PROTECTION)j=t;else if(t in O.bitmaps)if(t>=3e3){const e=O.bitmaps[t];ts(K(e[0],256*3)),S.set(K(e[1],P*$e))}else Ps(t)},[E.playMusic](){const t=C(),e=C(),n=_();hs(t,e,n)}};function fr(){return{part:Ft,vars:p.slice(),tasks:JSON.parse(JSON.stringify(R)),buffer8:S.slice(),palette32:lt.slice()}}function pr(){rt=1,ve=2,De=ae(254),S.fill(0),Oe=-1,p.fill(0),p[w.RANDOM_SEED]=Date.now(),p[w.HACK_VAR_BC]=16,p[w.HACK_VAR_C6]=128,p[w.HACK_VAR_F2]=4e3,p[w.HACK_VAR_DC]=33,p[w.HACK_VAR_E4]=20,j=sr||_s?ke.INTRODUCTION:ke.PROTECTION,g==null||g.stopMusic()}function In(t,e=0){j=t,hr(j,e),Ft=j,j=0}async function xs(t){rs(t,P,$e),await us(),g==null||g.setModifyVarCallback((e,n)=>{p[e]=n}),ss(),pr()}var Ls=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},_r={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Ls,function(){var n=function(){function r(f){return o.appendChild(f.dom),f}function i(f){for(var m=0;m<o.children.length;m++)o.children[m].style.display=m===f?"block":"none";s=f}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(f){f.preventDefault(),i(++s%o.children.length)},!1);var c=(performance||Date).now(),a=c,l=0,h=r(new n.Panel("FPS","#0ff","#002")),d=r(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=r(new n.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:r,showPanel:i,begin:function(){c=(performance||Date).now()},end:function(){l++;var f=(performance||Date).now();if(d.update(f-c,200),f>a+1e3&&(h.update(1e3*l/(f-a),100),a=f,l=0,u)){var m=performance.memory;u.update(m.usedJSHeapSize/1048576,m.jsHeapSizeLimit/1048576)}return f},update:function(){c=this.end()},domElement:o,setMode:i}};return n.Panel=function(r,i,s){var o=1/0,c=0,a=Math.round,l=a(window.devicePixelRatio||1),h=80*l,d=48*l,u=3*l,f=2*l,m=3*l,A=15*l,y=74*l,$=30*l,T=document.createElement("canvas");T.width=h,T.height=d,T.style.cssText="width:80px;height:48px";var v=T.getContext("2d");return v.font="bold "+9*l+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=s,v.fillRect(0,0,h,d),v.fillStyle=i,v.fillText(r,u,f),v.fillRect(m,A,y,$),v.fillStyle=s,v.globalAlpha=.9,v.fillRect(m,A,y,$),{dom:T,update:function(H,ue){o=Math.min(o,H),c=Math.max(c,H),v.fillStyle=s,v.globalAlpha=1,v.fillRect(0,0,h,A),v.fillStyle=i,v.fillText(a(H)+" "+r+" ("+a(o)+"-"+a(c)+")",u,f),v.drawImage(T,m+l,A,y-l,$,m,A,y-l,$),v.fillRect(m+y-l,A,l,$),v.fillStyle=s,v.globalAlpha=.9,v.fillRect(m+y-l,A,l,a((1-H/ue)*$))}}},n})})(_r);var Us=_r.exports;let Ee,le=null;const xe=new Array;let st;const Ms=50,Hs=1e3;let Ke=null;function Dt(){const t=Date.now();Ee.begin(),ys(),Ee.end(),st+Hs<t&&(xe.length==Ms&&xe.shift(),xe.push(fr()),st=Date.now()),le=requestAnimationFrame(Dt)}function ks(){Ee=new Us,Ee.showPanel(1),document.body.appendChild(Ee.dom),st=Date.now(),xe.length=0,Dt()}function Fs(){return le&&cancelAnimationFrame(le),Ee.dom.remove(),le=null,g==null||g.pause(),!0}function Ds(){return le?(cancelAnimationFrame(le),le=null,g==null||g.pause(),!0):(g==null||g.resume(),Dt(),!1)}function Bs(){if(Ke)In(Ke),Ke=null;else{g==null||g.pause();const{part:t}=fr();Ke=t,In(ke.CODE)}}function zs(){pr(),st=Date.now(),xe.length=0}var Ws=Object.defineProperty,js=Object.getOwnPropertyDescriptor,Vs=(t,e,n,r)=>{for(var i=r>1?void 0:r?js(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Ws(e,n,i),i};let Pn=class extends Q{constructor(){super(...arguments);this.onKeypress=t=>{switch(t.key){case"r":zs();break;case"p":Ds();break;case"c":Bs();break}}}createRenderRoot(){return this}firstUpdated(){this.onStart()}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.onKeypress)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keyup",this.onKeypress),this.onStop()}render(){return se`
      <div id="app-index__canvas-container">
        <canvas id="screen" width="960" height="600"></canvas>
      </div>
    `}async onStart(){const t=this.querySelector("#screen");await xs(t),ks()}onStop(){Fs(),Z.go("")}};Pn=Vs([at("app-game")],Pn);var Ks=Object.defineProperty,Gs=Object.getOwnPropertyDescriptor,Js=(t,e,n,r)=>{for(var i=r>1?void 0:r?Gs(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Ks(e,n,i),i};let On=class extends Q{createRenderRoot(){return this}render(){return se`
    <div id="app-index__help-container">
      <table class="app-index__help">
        <tr>
          <th>Move / Swim</th>
          <td>Arrow Keys</td>
          <td>L-pad</td>
        </tr>
        <tr>
          <th>Kick / Fire Weapon</th>
          <td><kbd>Space</kbd></td>
          <td><kbd class="gamepad">A</kbd></td>
        </tr>
        <tr>
          <th>Jump</th>
          <td><kbd>Shift</kbd></td>
          <td><kbd class="gamepad">B</kbd></td>
        </tr>
    </div>
    `}};On=Js([at("app-help")],On);var qs=Object.defineProperty,Xs=Object.getOwnPropertyDescriptor,Ys=(t,e,n,r)=>{for(var i=r>1?void 0:r?Xs(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&qs(e,n,i),i};let xn=class extends Q{constructor(){super(...arguments);this.currentScreen="",this.onKeypress=t=>{switch(t.key){case"Enter":case" ":if(this.inGame)return;this.onEnter();break;case"ArrowUp":if(this.inGame)return;this.focusPrevious();break;case"ArrowDown":if(this.inGame)return;this.focusNext();break;case"Escape":this.onEscape();break}}}get inGame(){return this.currentScreen==="game"}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),document.addEventListener("keyup",this.onKeypress),ie.on("connect",t=>{t.after("up",()=>this.focusPrevious()),t.after("down",()=>this.focusNext()),t.after("button0",()=>this.onEnter()),t.after("button1",()=>{this.inGame||this.onEscape()}),t.after("button16",()=>this.onEscape())})}disconnectedCallback(){document.removeEventListener("keyup",this.onKeypress)}firstUpdated(){this.audioElm=document.querySelector("#audio")}render(){const t=this.getCurrentRoute();return se`
      <div @dblclick=${()=>this.onFullscreen()}>
        <main>
          <div id="app-index__main-container">
            ${t}
          </div>
        </main>
        <audio id="audio" autoplay>
          <source src="./assets/Another World.mp3" type="audio/mpeg" />
        </audio>
      </div>
    `}getCurrentRoute(){switch(this.currentScreen){case"game":return se`<app-game></app-game>`;case"help":return se`<app-help></app-help>`;default:return se`<app-menu></app-menu>`}}onFullscreen(){Qs(this.querySelector("#app-index__main-container"))}onEscape(){this.currentScreen="",this.requestUpdate()}onEnter(){if(this.inGame)return;const t=document.activeElement,e=t==null?void 0:t.getAttribute("data-route");this.currentScreen=e||"",this.inGame?this.audioElm.pause():this.audioElm.play(),this.requestUpdate()}focusNext(){var e;const t=Ln(this.getFocusedElementIndex()+1,this.focusableItems.length);(e=this.focusableItems[t])==null||e.focus()}focusPrevious(){var e;const t=Ln(this.getFocusedElementIndex()-1,this.focusableItems.length);(e=this.focusableItems[t])==null||e.focus()}get focusableItems(){return Array.from(this.querySelectorAll("a, button"))}getFocusedElementIndex(){return this.focusableItems.findIndex(t=>t===document.activeElement)}};xn=Ys([at("app-index")],xn);function Ln(t,e){return(t%e+e)%e}const Zs=["requestFullscreen","mozRequestFullScreen","msRequestFullscreen","webkitRequestFullscreen"];function Qs(t,e){var n;return(n=t[Zs.find(r=>typeof t[r]=="function")])==null?void 0:n.call(t,e)}
//# sourceMappingURL=index.b0cddaa6.js.map
